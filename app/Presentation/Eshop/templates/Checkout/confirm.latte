
{block content}

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ObjednÃ¡vka</title>
  <link rel="stylesheet" href="{$basePath}/assets/main.css?v={=time()}">
</head>

<div class="checkout-page">
  <div class="checkout-header">
    <h1>âœ… DÄ›kujeme za objednÃ¡vku!</h1>
    <div class="checkout-steps">
      <div class="step completed">
        <div class="step-icon">âœ“</div>
        <div class="step-text">KoÅ¡Ã­k</div>
      </div>
      <div class="step completed">
        <div class="step-icon">âœ“</div>
        <div class="step-text">Doprava a platba</div>
      </div>
      <div class="step completed">
        <div class="step-icon">âœ“</div>
        <div class="step-text">DodacÃ­ Ãºdaje</div>
      </div>
      <div class="step completed active">
        <div class="step-icon">âœ“</div>
        <div class="step-text">PotvrzenÃ­</div>
      </div>
    </div>
  </div>

  <div class="checkout-content">
    {if !$order}
      <div class="empty-cart">
        <div class="empty-icon">âš ï¸</div>
        <h3>ObjednÃ¡vka nenalezena</h3>
        <p>PoÅ¾adovanÃ¡ objednÃ¡vka nebyla nalezena nebo neexistuje.</p>
        <a href="/eshop/product/list" class="btn btn-primary">ZpÄ›t do obchodu</a>
      </div>
    {else}
      <div class="checkout-grid">
        <div class="checkout-main">
          <div class="order-summary success-animation">
            <h2>ğŸ‰ ObjednÃ¡vka byla pÅ™ijata</h2>
            <div class="order-confirmation">
              <div class="confirmation-item">
                <span class="confirmation-label">ÄŒÃ­slo objednÃ¡vky:</span>
                <span class="confirmation-value"><strong>#{$order[id]}</strong></span>
              </div>
              <div class="confirmation-item">
                <span class="confirmation-label">Stav:</span>
                <span class="confirmation-value success-badge">âœ“ PÅ™ijato</span>
              </div>
              <div class="confirmation-item">
                <span class="confirmation-label">Datum:</span>
                <span class="confirmation-value">{$order['created'] ?? date('d.m.Y H:i')}</span>
              </div>
            </div>
          </div>

          <div class="shipping-payment">
            <h2>ğŸ“¦ DodacÃ­ Ãºdaje</h2>
            <div class="delivery-info">
              <div class="info-section">
                <h4>ğŸ‘¤ PÅ™Ã­jemce</h4>
                <p><strong>{$order[name]|escape}</strong></p>
                {ifset $order[email]}<p>ğŸ“§ {$order[email]|escape}</p>{/ifset}
                {ifset $order[phone]}<p>ğŸ“ {$order[phone]|escape}</p>{/ifset}
              </div>
              <div class="info-section">
                <h4>ğŸ“ DodacÃ­ adresa</h4>
                <p>{$order[address]|escape}</p>
              </div>
            </div>
          </div>

          {ifset $order[items]}
          <div class="order-summary">
            <h2>ğŸ“‹ ObjednanÃ© poloÅ¾ky</h2>
            <div class="order-items">
              {foreach $order[items] as $item}
                <div class="order-item">
                  <div class="item-image">
                    <img src="{$item[product]['image'] ?? '/assets/placeholder.svg'}" alt="{$item[product][name]|escape}" loading="lazy">
                  </div>
                  <div class="item-details">
                    <h4>{$item[product][name]|escape}</h4>
                    <p class="item-price">{$item[product][price]} KÄ</p>
                  </div>
                  <div class="item-quantity">
                    <span class="qty-badge">{$item[qty]}Ã—</span>
                  </div>
                  <div class="item-total">
                    <strong>{$item[product][price] * $item[qty]} KÄ</strong>
                  </div>
                </div>
              {/foreach}
            </div>
          </div>
          {/ifset}
        </div>

        <div class="checkout-sidebar">
          <div class="order-total">
            <h3>ğŸ’° CelkovÃ¡ ÄÃ¡stka</h3>
            <div class="total-breakdown">
              {ifset $order[items]}
                <div class="total-row">
                  <span>Produkty:</span>
                  <span>{var $subtotal = 0}{foreach $order[items] as $item}{var $subtotal = $subtotal + $item[product][price] * $item[qty]}{/foreach}{$subtotal} KÄ</span>
                </div>
              {/ifset}
              <div class="total-row">
                <span>Doprava:</span>
                <span>99 KÄ</span>
              </div>
              <div class="total-row total-final">
                <span>Celkem:</span>
                <span><strong>{ifset $order[total]}{$order[total]}{else}{$subtotal + 99}{/ifset} KÄ</strong></span>
              </div>
            </div>
            <div class="secure-badge">
              âœ… ObjednÃ¡vka potvrzena
            </div>
          </div>

          <div class="next-steps">
            <h3>ğŸ“¬ Co bude nÃ¡sledovat?</h3>
            <div class="step-list">
              <div class="next-step">
                <span class="step-number">1</span>
                <div class="step-content">
                  <h4>PotvrzenÃ­ emailem</h4>
                  <p>Na vÃ¡Å¡ email poÅ¡leme potvrzenÃ­ objednÃ¡vky</p>
                </div>
              </div>
              <div class="next-step">
                <span class="step-number">2</span>
                <div class="step-content">
                  <h4>PÅ™Ã­prava zÃ¡silky</h4>
                  <p>VaÅ¡i objednÃ¡vku pÅ™ipravÃ­me k odeslÃ¡nÃ­</p>
                </div>
              </div>
              <div class="next-step">
                <span class="step-number">3</span>
                <div class="step-content">
                  <h4>DoruÄenÃ­</h4>
                  <p>ZÃ¡silku doruÄÃ­me na uvedenou adresu</p>
                </div>
              </div>
            </div>
          </div>

          <div class="action-buttons">
            <a href="/eshop/product/list" class="btn btn-primary btn-large">
              <span class="btn-icon">ğŸ›ï¸</span>
              <span class="btn-text">PokraÄovat v nÃ¡kupu</span>
            </a>
            <a href="/" class="btn btn-secondary">
              <span class="btn-icon">ğŸ </span>
              <span class="btn-text">ZpÄ›t na hlavnÃ­ strÃ¡nku</span>
            </a>
          </div>
        </div>
      </div>
    {/if}
  </div>
</div>

{/block}


