
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ObjednÃ¡vka</title>
  <!-- TADY JE PEVNÃ LINK NA CSS -->
  <link rel="stylesheet" href="{$basePath}/assets/main.css?v={=time()}">
</head>
{var $pageTitle = 'ObjednÃ¡vka'}

{block content}
<div class="checkout-page">
  <div class="checkout-header">
    <h1>ğŸ›’ ObjednÃ¡vka</h1>
    <div class="checkout-steps">
      <div class="step completed">
        <div class="step-icon">âœ“</div>
        <div class="step-text">KoÅ¡Ã­k</div>
      </div>
      <div class="step active">
        <div class="step-icon">2</div>
        <div class="step-text">Doprava a platba</div>
      </div>
      <div class="step">
        <div class="step-icon">3</div>
        <div class="step-text">DodacÃ­ Ãºdaje</div>
      </div>
      <div class="step">
        <div class="step-icon">4</div>
        <div class="step-text">PotvrzenÃ­</div>
      </div>
    </div>
  </div>

  <div class="checkout-content">
    {if count($items) === 0}
      <div class="empty-cart">
        <div class="empty-icon">ğŸ›’</div>
        <h3>VÃ¡Å¡ koÅ¡Ã­k je prÃ¡zdnÃ½</h3>
        <p>PÅ™idejte nÄ›jakÃ© produkty do koÅ¡Ã­ku, abyste mohli pokraÄovat v objednÃ¡vce.</p>
        <a href="/eshop/product/list" class="btn btn-primary">ZpÄ›t do obchodu</a>
      </div>
    {else}
      <div class="checkout-grid">
        <div class="checkout-main">
          <div class="order-summary">
            <h2>ğŸ“‹ Souhrn objednÃ¡vky</h2>
            <div class="order-items">
              {foreach $items as $item}
                <div class="order-item">
                  <div class="item-image">
                    <img src="{$item[product]['image'] ?? '/assets/placeholder.svg'}" alt="{$item[product][name]|escape}" loading="lazy">
                  </div>
                  <div class="item-details">
                    <h4>{$item[product][name]|escape}</h4>
                    <p class="item-price">{$item[product][price]} KÄ</p>
                  </div>
                  <div class="item-quantity">
                    <span class="qty-badge">{$item[qty]}x</span>
                  </div>
                  <div class="item-total">
                    <strong>{$item[product][price] * $item[qty]} KÄ</strong>
                  </div>
                </div>
              {/foreach}
            </div>
          </div>

          <div class="shipping-payment">
            <h2>ğŸšš Doprava a platba</h2>
            <form method="post" action="{link Checkout:default}" class="checkout-form" novalidate>
              <div class="form-section">
                <h3>Doprava</h3>
                <div class="radio-group">
                  <label class="radio-option">
                    <input type="radio" name="shipping" value="post" checked>
                    <div class="radio-content">
                      <div class="radio-icon">ğŸ“®</div>
                      <div class="radio-text">
                        <strong>ÄŒeskÃ¡ poÅ¡ta</strong>
                        <span>DoruÄenÃ­ do 3-5 pracovnÃ­ch dnÅ¯</span>
                      </div>
                      <div class="radio-price">99 KÄ</div>
                    </div>
                  </label>
                  <label class="radio-option">
                    <input type="radio" name="shipping" value="express">
                    <div class="radio-content">
                      <div class="radio-icon">ğŸš€</div>
                      <div class="radio-text">
                        <strong>ExpresnÃ­ doruÄenÃ­</strong>
                        <span>DoruÄenÃ­ do 24 hodin</span>
                      </div>
                      <div class="radio-price">199 KÄ</div>
                    </div>
                  </label>
                </div>
              </div>

              <div class="form-section">
                <h3>Platba</h3>
                <div class="radio-group">
                  <label class="radio-option">
                    <input type="radio" name="payment" value="cash" checked>
                    <div class="radio-content">
                      <div class="radio-icon">ğŸ’µ</div>
                      <div class="radio-text">
                        <strong>DobÃ­rka</strong>
                        <span>Platba pÅ™i pÅ™evzetÃ­</span>
                      </div>
                    </div>
                  </label>
                  <label class="radio-option">
                    <input type="radio" name="payment" value="card">
                    <div class="radio-content">
                      <div class="radio-icon">ğŸ’³</div>
                      <div class="radio-text">
                        <strong>PlatebnÃ­ karta</strong>
                        <span>BezpeÄnÃ¡ online platba</span>
                      </div>
                    </div>
                  </label>
                </div>
              </div>

              <div class="form-section">
                <h3>ğŸ“ DodacÃ­ Ãºdaje</h3>
                <div class="form-row">
                  <div class="form-group">
                    <label>JmÃ©no a pÅ™Ã­jmenÃ­</label>
                    <input type="text" name="name" placeholder="Zadejte svÃ© jmÃ©no">
                  </div>
                  <div class="form-group">
                    <label>Email</label>
                    <input type="email" name="email" placeholder="vas@email.cz">
                  </div>
                </div>
                <div class="form-group">
                  <label>Telefon</label>
                  <input type="tel" name="phone" placeholder="+420 123 456 789">
                </div>
                <div class="form-group">
                  <label>Adresa</label>
                  <textarea name="address" placeholder="Ulice, ÄÃ­slo popisnÃ©, PSÄŒ, mÄ›sto"></textarea>
                </div>
              </div>

              <div class="form-actions">
                <a href="/eshop/cart/" class="btn btn-secondary">
                  <span class="btn-icon">â†</span>
                  <span class="btn-text">ZpÄ›t do koÅ¡Ã­ku</span>
                </a>
                <button type="submit" class="btn btn-primary btn-large checkout-btn">
                  <span class="btn-icon">ğŸ’³</span>
                  <span class="btn-text">PokraÄovat k platbÄ›</span>
                  <span class="btn-arrow">â†’</span>
                </button>
              </div>
            </form>
          </div>
        </div>

        <div class="checkout-sidebar">
          <div class="order-total">
            <h3>ğŸ’° CelkovÃ¡ ÄÃ¡stka</h3>
            <div class="total-breakdown">
              <div class="total-row">
                <span>Produkty:</span>
                <span>{var $subtotal = 0}{foreach $items as $item}{var $subtotal = $subtotal + $item[product][price] * $item[qty]}{/foreach}{$subtotal} KÄ</span>
              </div>
              <div class="total-row">
                <span>Doprava:</span>
                <span>99 KÄ</span>
              </div>
              <div class="total-row total-final">
                <span>Celkem:</span>
                <span><strong>{$subtotal + 99} KÄ</strong></span>
              </div>
            </div>
            <div class="secure-badge">
              ğŸ”’ BezpeÄnÃ¡ platba
            </div>
          </div>
        </div>
      </div>
    {/if}
  </div>
</div>
{/block}
